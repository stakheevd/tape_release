# Устройство хранения данных "Лента"
## Описание программы

### Конфигурация ленты

Конфигурирование работы ленты (задержек чтения/записи/сдвига ленты в миллисекундах и ограничение по используемой памяти в байтах) осуществляется при помощи класса [TapeConfiguration](https://github.com/stakheevd/tape_release/blob/main/TapeConfigurator.h), поля которого инициализируются значениями из файла *config.txt*:

<memory_limit> <read_delay> <write_delay> <move_delay> - в одну строку, через пробел.

В случае ввода отрицательного значения задержек или ограничения по памяти < 4 байт программа завершит работу с соответствующим сообщением об ошибке. Если файл *config.txt* пуст или содержит символы, отличные от целых чисел, значение задержек инициализируется значением 0, ограничение по памяти 1 MB.

### Алгоритм работы программы

На вход программа получает название файла, содержащего целые числа в виде:

-4 3 -2 1 0 -1 2 -3 4 - в одну строку, через пробел.

Если был встречен символ, отличный от целого числа, программа выведет соответствующее сообщение об ошибке и завершит работу.

**NB №1:** Пустой файл - некорректный ввод.
**NB №2:** Программа не перезаписывает выходной файл.

Использование:

	./main <input_file_name> <output_file_name>

---

## Генератор случайных чисел (ГСЧ)

Генератор случайных чисел реализован в файле [generator.cpp](https://github.com/stakheevd/tape_release/blob/main/generator.cpp). Основан на законе равномерного распределения. Генерирует случайное число от INT32_MIN до INT32_MAX.

Использование (N - требуемое число случайных величин): 

	./generator N

В результате будет сгенерирован файл numbers_N.txt, содержащий N случайных чисел в случайном порядке.

---

## Unit-тестирование

Unit-тестирование осуществляется при помощи библиотеки [GoogleTest](https://github.com/google/googletest). Unit-тесты реализованы в файле [unit-tests.cpp](https://github.com/stakheevd/tape_release/blob/main/unit_tests.cpp). Первые 8 тестов проверяют корректность сортировки файлов, содержащих 0, 1, 100, 1000, 10000, 100000, 1000000, 10000000 чисел соответственно. 
Ещё один тест проверяет корректность обработки невалидного символа.

---

## Использование

**NB:** Для компиляции файлов проекта был использован компилятор Clang.

Поддерживаемые цели:

`build`: компиляция программы и ГСЧ;

	$ make build

`run`: запуск построенной программы (FILE_NAME - название входного файла)

	$ make run input_file=numbers_100.txt output_file=output.txt

`test`: компиляция ГСЧ и unit-тестов, подготовка файлов для тестирования, запуск тестов

	$ make test

`clean`: удаление файлов временных лент из директории /tmp и файлов для тестирования

	$ make clean

`all`: компиляция файлов проекта и запуск тестов

	$ make 
